<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<META NAME="generator" CONTENT="http://txt2tags.sf.net">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="stylesheet" TYPE="text/css" HREF="style.css">
<TITLE>Instalação da máquina virtual</TITLE>
</HEAD><BODY BGCOLOR="white" TEXT="black">
<P ALIGN="center"><CENTER><H1>Instalação da máquina virtual</H1>
<FONT SIZE="4">
<I>$Id: Virtual_Machine_InstGuide.t2t,v 1.1 2009-04-22 16:36:13 giovani Exp $</I><BR>
04/22/09 15:21:53
</FONT></CENTER>

<P></P>
<HR NOSHADE SIZE=1>
<P></P>
  <UL>
  <LI><A HREF="#toc1">1. Instalar</A>
  <LI><A HREF="#toc2">2. Configurar</A>
  <LI><A HREF="#toc3">3. Usando o lua no Dmvdeb</A>
  <LI><A HREF="#toc4">4. Recomendações gerais</A>
  </UL>

<P></P>
<HR NOSHADE SIZE=1>
<P></P>
<P>
Obs.: Todos os procedimentos a seguir são válidos sob uso de sistema operacional WindowsXP SP2
</P>
<A NAME="toc1"></A>
<H1>1. Instalar</H1>
<UL>
<LI>Instalar o vmplayer.
<LI>Copiar a imagem do Dmvdeb (*.vmx e *.vmdk) na máquina host (recomenda-se o uso da pasta C:\Projetos\dmvdeb) 
<LI>Criar um compartilhamento de rede para o diretório <I>Scripts</I>:
 <UL>
 <LI>Com o windows explorer aberto na pasta "$CVS_ROOT$\PD1461-X10GIGA\lp\pd1461_top\PRINCIPAL\Scripts" selecionar "Ferramentas -&gt; 
Opções de pasta".
 <LI>Selecionar a aba "Modo de exibição".
 <LI>Verificar que o checkbox "Compartilhamento simples de arquivo" está desmarcado.
 <LI>Clicar em Ok.
 <LI>Subir um nível no diretório e usar um clique direito na pasta "Scripts". Selecionar "Compartilhamento e Segurança".
 <LI>Se for a primeira vez que o usuário compartilha uma pasta clicar na mensagem-link com texto similar a "Compreendo os 
riscos de compartilhar meus arquivos e desejo fazê-lo mesmo assim".
 <LI>Na aba "Compartilhamento", caixa "Compartilhamento de rede e segurança" checar a caixa "Compartilhar essa pasta na rede".
 <LI>Colocar como nome em "Compartilhamento:" apenas lua.
 <LI>Clicar no botao "Permissões".
 <LI>Selecionar o grupo "Todos" e quaisquer outros grupos que eventualmente existirem e clicar em remover.
 <LI>Clicar em adicionar. Na próxima tela clicar em "Avançado". Na tela que abre clicar em "Localizar agora". Selecionar na 
listagem o seu nome de usuário e clicar em Ok nas duas telas subsequentes. Selecionar o seu nome de usuário e deixar marcado o 
checkbox "Controle total".
 <LI>Clicar em Ok.
 </UL>
</UL>

<P>
Esse compartilhamento será usado para que a máquina virtual acesse os scripts lua do host para leitura.
</P>
<A NAME="toc2"></A>
<H1>2. Configurar</H1>
<UL>
<LI>Rodar o vmplayer e carregar o dmvdeb_lua.vmx
 <UL>
 <LI>para "entrar" na maquina virtual, pode-se clicar nela ou teclar ctrl+g
 <LI>para "sair" (obter o mouse e teclado de volta na maquina host) basta teclar ctrl+alt
 <LI>Recomenda-se desmarcar a caixa player-&gt;preferences-&gt;"check the web for updates on startup", evitando a nag screen na inicialização. 
 </UL>
<LI>Configurar o putty para acessar a máquina virtual via ssh
 <UL>
 <LI>Logar como root/root na maquina virtual
 <LI>Obter o ip da máquina virtual usando o comando /sbin/ifconfig a partir do prompt da mesma e configurá-lo no putty.
 <LI>Editar a fstab usando o comando vi /etc/fstab. Alterar a linha em que é definido o compartilhamento lua com o seguinte padrão:
 </UL>
</UL>

<PRE>
  //&lt;maquina_do_usuario&gt;/lua /linuxppc/SELF/build/application/dmlua smbfs auto,fmask=755,dmask=755,iocharset=iso8859-1,
  codepage=cp850,rw,username=&lt;username&gt;,password=&lt;password&gt; 0 0
</PRE>
<P></P>
 <UL>
 <LI>Selecionar o protocolo de conexão como ssh.
 <LI>Selecionar a opção rxvt em /Terminal/Keyboard/The Home and End Keys
 <LI>Selecionar a opção Disable application Keypad mode em /Terminal/Features
 <LI>Salvar as configurações da seção. 
 </UL>

<A NAME="toc3"></A>
<H1>3. Usando o lua no Dmvdeb</H1>
<UL>
<LI>Com a máquina virtual executando em background abrir uma seção ssh para o dmvdeb
<LI>Executar o lua a partir do prompt. 
</UL>

<PRE>
  % lua_PD1413
</PRE>
<P></P>
<P>
Alterar os scripts normalmente no host, o mapeamento para a máquina virtual é automático.
Basta executar novamente o require no arquivo alterado para que as modificações tenham efeito.
</P>
<A NAME="toc4"></A>
<H1>4. Recomendações gerais</H1>
<UL>
<LI>Ao entrar por SSH (putty) recomenda-se também logar como usuário:
 <UL>
 <LI>username=user
 <LI>password=user 
 </UL>
<LI>Durante o boot a máquina virtual pode receber um endereço diferente do atribuído na última execução (embora em geral seja o mesmo).
 <UL>
 <LI>Se isso ocorrer usar o comando /sbin/ifconfig na máquina virtual para obter o novo IP, que também aparece na inicialização. 
 </UL>
<LI>Ao desligar o PC host, recomenda-se desligar a maquina virtual antes: logar como root/root e dar um poweroff. 
<P></P>
</UL>


<!-- html code generated by txt2tags 2.3 (http://txt2tags.sf.net) -->
<!-- cmdline: txt2tags -\-outfile=Virtual_Machine_InstGuide.html Virtual_Machine_InstGuide.t2t -->
</BODY></HTML>
