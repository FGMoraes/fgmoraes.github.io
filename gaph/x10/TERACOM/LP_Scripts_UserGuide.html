<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<META NAME="generator" CONTENT="http://txt2tags.sf.net">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="stylesheet" TYPE="text/css" HREF="style.css">
<TITLE>Guia de Uso dos scripts de Lógica Programável</TITLE>
</HEAD><BODY BGCOLOR="white" TEXT="black">
<P ALIGN="center"><CENTER><H1>Guia de Uso dos scripts de Lógica Programável</H1>
<FONT SIZE="4">
<I>$Id: LP_Scripts_UserGuide.t2t,v 1.1 2009-04-22 16:36:13 giovani Exp $</I><BR>
04/22/09 15:20:46
</FONT></CENTER>

<P></P>
<HR NOSHADE SIZE=1>
<P></P>
  <UL>
  <LI><A HREF="#toc1">1. Introdução</A>
  <LI><A HREF="#toc2">2. Início</A>
  <LI><A HREF="#toc3">3. Funções Básicas</A>
    <UL>
    <LI><A HREF="#toc4">3.1. Lista de funções</A>
      <UL>
      <LI><A HREF="#toc5">3.1.1. card_init</A>
      <LI><A HREF="#toc6">3.1.2. phy_bert_txen</A>
      <LI><A HREF="#toc7">3.1.3. print_bert_phy</A>
      <LI><A HREF="#toc8">3.1.4. phy_sel</A>
      <LI><A HREF="#toc9">3.1.5. set_dleb</A>
      <LI><A HREF="#toc10">3.1.6. set_lleb</A>
      </UL>
    </UL>
  </UL>

<P></P>
<HR NOSHADE SIZE=1>
<P></P>
<A NAME="toc1"></A>
<H1>1. Introdução</H1>
<P>
Esse documento descreve procedimentos para o uso de scripts de LP para depuração.
</P>
<A NAME="toc2"></A>
<H1>2. Início</H1>
<P>
Para começar o uso do Lua deve-se iniciar seu aplicativo. Na tela do prompt, digite:
</P>
<PRE>
  % lua_PD1413
</PRE>
<P></P>
<P>
Para carregar as funções dos scripts de LP, digite:
</P>
<PRE>
  &gt; require "pd1461"
  &gt; eq=pd1461.new()
</PRE>
<P></P>
<P>
Depois disso, o objeto "eq" recebe todas as funções descritas através do procedimento "new".
A partir de agora, todas as classes de funções estão incorporadas ao objeto "eq".
</P>
<A NAME="toc3"></A>
<H1>3. Funções Básicas</H1>
<P>
A maioria das chamadas de função tem o seguinte aspecto:
</P>
<PRE>
  eq.classe:funcao(&lt;arg1&gt;, &lt;arg2&gt;)
</PRE>
<P></P>
<UL>
<LI>classe: São classes de funções definidas em diferentes arquivos (.lua). Denota uma organização de funções conforme uso específico.
<LI>funcao: Nome da função.
<LI>argX: Argumentos das funções.
</UL>

<A NAME="toc4"></A>
<H2>3.1. Lista de funções</H2>
<A NAME="toc5"></A>
<H3>3.1.1. card_init</H3>
<PRE>
  eq:card_init(&lt;slot&gt;, &lt;interface1&gt;, &lt;interface2&gt;)
</PRE>
<P>
Essa chamada de função reúne todos as configurações necessárias para o pleno funcionamento da placa.
</P>
<P>
Parâmetros:
</P>
<UL>
<LI>slot (number): 0 (este parâmetro deve assumir sempre valor 0. Ele existe por questões de compatibilidade de uso na DATACOM)
<LI>interface1 (string): "OTN", "STM" ou "GBE". Configura a interface "line".
<LI>interface2 (string): "OTN", "STM" ou "GBE". Configura a interface "client".
</UL>

<A NAME="toc6"></A>
<H3>3.1.2. phy_bert_txen</H3>
<PRE>
  eq:phy_bert_txen(&lt;slot&gt;, &lt;phy&gt;, &lt;enable&gt;)
</PRE>
<P>
Essa função habilita/desabilita o teste de BERT do barramento com os PHYs.
</P>
<P>
Parâmetros:
</P>
<UL>
<LI>slot (number): 0
<LI>phy (number): 0 ou 1. Seleciona o barramento a ser testado. (0: "Line" e 1: "Client")
<LI>enable (boolean): true ou false. Habilita/Desabiita BERT.
</UL>

<A NAME="toc7"></A>
<H3>3.1.3. print_bert_phy</H3>
<PRE>
  eq:print_bert_phy(&lt;slot&gt;)
</PRE>
<P>
Imprime na tela o status do teste de BERT dos barramentos com os PHYs.
</P>
<P>
Parâmetros:
</P>
<UL>
<LI>slot (number): 0
</UL>

<A NAME="toc8"></A>
<H3>3.1.4. phy_sel</H3>
<PRE>
  eq:phy_sel(&lt;slot&gt;, &lt;phy&gt;)
</PRE>
<P>
Seleciona o dispositivo PHY a ser acessado.
</P>
<P>
Parâmetros:
</P>
<UL>
<LI>slot (number): 0
<LI>phy (number): 0 ou 1.
</UL>

<A NAME="toc9"></A>
<H3>3.1.5. set_dleb</H3>
<PRE>
  eq.phy:set_dleb(&lt;slot&gt;, &lt;enable&gt;)
</PRE>
<P>
Habilita/Desabilita o Digital Loopback do Transceiver (PHY). Útil para isolar testes. (Requer seleção prévia através de "phy_sel")
</P>
<P>
Parâmetros:
</P>
<UL>
<LI>slot (number): 0
<LI>enable (boolean): true ou false.
</UL>

<A NAME="toc10"></A>
<H3>3.1.6. set_lleb</H3>
<PRE>
  eq.phy:set_lleb(&lt;slot&gt;, &lt;enable&gt;)
</PRE>
<P>
Habilita/Desabilita o Line Loopback do Transceiver (PHY). Útil para isolar testes. (Requer seleção prévia através de "phy_sel")
</P>
<P>
Parâmetros:
</P>
<UL>
<LI>slot (number): 0
<LI>enable (boolean): true ou false.
</UL>


<!-- html code generated by txt2tags 2.3 (http://txt2tags.sf.net) -->
<!-- cmdline: txt2tags -\-outfile=LP_Scripts_UserGuide.html LP_Scripts_UserGuide.t2t -->
</BODY></HTML>
